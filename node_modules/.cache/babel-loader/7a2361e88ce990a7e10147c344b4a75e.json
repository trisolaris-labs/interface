{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _utils = require('./utils.js');\n\nvar utils = _interopRequireWildcard(_utils);\n\nvar _ajax = require('./ajax.js');\n\nvar _ajax2 = _interopRequireDefault(_ajax);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction getDefaults() {\n  return {\n    loadPath: '/locales/{{lng}}/{{ns}}.json',\n    addPath: '/locales/add/{{lng}}/{{ns}}',\n    allowMultiLoading: false,\n    parse: JSON.parse,\n    crossDomain: false,\n    ajax: _ajax2.default\n  };\n}\n\nvar Backend = function () {\n  function Backend(services) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Backend);\n\n    this.init(services, options);\n    this.type = 'backend';\n  }\n\n  _createClass(Backend, [{\n    key: 'init',\n    value: function init(services) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      this.services = services;\n      this.options = utils.defaults(options, this.options || {}, getDefaults());\n    }\n  }, {\n    key: 'readMulti',\n    value: function readMulti(languages, namespaces, callback) {\n      var loadPath = this.options.loadPath;\n\n      if (typeof this.options.loadPath === 'function') {\n        loadPath = this.options.loadPath(languages, namespaces);\n      }\n\n      var url = this.services.interpolator.interpolate(loadPath, {\n        lng: languages.join('+'),\n        ns: namespaces.join('+')\n      });\n      this.loadUrl(url, callback);\n    }\n  }, {\n    key: 'read',\n    value: function read(language, namespace, callback) {\n      var loadPath = this.options.loadPath;\n\n      if (typeof this.options.loadPath === 'function') {\n        loadPath = this.options.loadPath([language], [namespace]);\n      }\n\n      var url = this.services.interpolator.interpolate(loadPath, {\n        lng: language,\n        ns: namespace\n      });\n      this.loadUrl(url, callback);\n    }\n  }, {\n    key: 'loadUrl',\n    value: function loadUrl(url, callback) {\n      var _this = this;\n\n      this.options.ajax(url, this.options, function (data, xhr) {\n        if (xhr.status >= 500 && xhr.status < 600) return callback('failed loading ' + url, true\n        /* retry */\n        );\n        if (xhr.status >= 400 && xhr.status < 500) return callback('failed loading ' + url, false\n        /* no retry */\n        );\n        var ret = void 0,\n            err = void 0;\n\n        try {\n          ret = _this.options.parse(data, url);\n        } catch (e) {\n          err = 'failed parsing ' + url + ' to json';\n        }\n\n        if (err) return callback(err, false);\n        callback(null, ret);\n      });\n    }\n  }, {\n    key: 'create',\n    value: function create(languages, namespace, key, fallbackValue) {\n      var _this2 = this;\n\n      if (typeof languages === 'string') languages = [languages];\n      var payload = {};\n      payload[key] = fallbackValue || '';\n      languages.forEach(function (lng) {\n        var url = _this2.services.interpolator.interpolate(_this2.options.addPath, {\n          lng: lng,\n          ns: namespace\n        });\n\n        _this2.options.ajax(url, _this2.options, function (data, xhr) {//const statusCode = xhr.status.toString();\n          // TODO: if statusCode === 4xx do log\n        }, payload);\n      });\n    }\n  }]);\n\n  return Backend;\n}();\n\nBackend.type = 'backend';\nexports.default = Backend;","map":{"version":3,"sources":["/Users/sidshekhar/Documents/interface/node_modules/i18next-xhr-backend/dist/commonjs/index.js"],"names":["Object","defineProperty","exports","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_utils","require","utils","_interopRequireWildcard","_ajax","_ajax2","_interopRequireDefault","obj","__esModule","default","newObj","hasOwnProperty","call","_classCallCheck","instance","TypeError","getDefaults","loadPath","addPath","allowMultiLoading","parse","JSON","crossDomain","ajax","Backend","services","options","arguments","undefined","init","type","defaults","readMulti","languages","namespaces","callback","url","interpolator","interpolate","lng","join","ns","loadUrl","read","language","namespace","_this","data","xhr","status","ret","err","e","create","fallbackValue","_this2","payload","forEach"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _utils = require('./utils.js');\n\nvar utils = _interopRequireWildcard(_utils);\n\nvar _ajax = require('./ajax.js');\n\nvar _ajax2 = _interopRequireDefault(_ajax);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction getDefaults() {\n  return {\n    loadPath: '/locales/{{lng}}/{{ns}}.json',\n    addPath: '/locales/add/{{lng}}/{{ns}}',\n    allowMultiLoading: false,\n    parse: JSON.parse,\n    crossDomain: false,\n    ajax: _ajax2.default\n  };\n}\n\nvar Backend = function () {\n  function Backend(services) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Backend);\n\n    this.init(services, options);\n\n    this.type = 'backend';\n  }\n\n  _createClass(Backend, [{\n    key: 'init',\n    value: function init(services) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      this.services = services;\n      this.options = utils.defaults(options, this.options || {}, getDefaults());\n    }\n  }, {\n    key: 'readMulti',\n    value: function readMulti(languages, namespaces, callback) {\n      var loadPath = this.options.loadPath;\n      if (typeof this.options.loadPath === 'function') {\n        loadPath = this.options.loadPath(languages, namespaces);\n      }\n\n      var url = this.services.interpolator.interpolate(loadPath, { lng: languages.join('+'), ns: namespaces.join('+') });\n\n      this.loadUrl(url, callback);\n    }\n  }, {\n    key: 'read',\n    value: function read(language, namespace, callback) {\n      var loadPath = this.options.loadPath;\n      if (typeof this.options.loadPath === 'function') {\n        loadPath = this.options.loadPath([language], [namespace]);\n      }\n\n      var url = this.services.interpolator.interpolate(loadPath, { lng: language, ns: namespace });\n\n      this.loadUrl(url, callback);\n    }\n  }, {\n    key: 'loadUrl',\n    value: function loadUrl(url, callback) {\n      var _this = this;\n\n      this.options.ajax(url, this.options, function (data, xhr) {\n        if (xhr.status >= 500 && xhr.status < 600) return callback('failed loading ' + url, true /* retry */);\n        if (xhr.status >= 400 && xhr.status < 500) return callback('failed loading ' + url, false /* no retry */);\n\n        var ret = void 0,\n            err = void 0;\n        try {\n          ret = _this.options.parse(data, url);\n        } catch (e) {\n          err = 'failed parsing ' + url + ' to json';\n        }\n        if (err) return callback(err, false);\n        callback(null, ret);\n      });\n    }\n  }, {\n    key: 'create',\n    value: function create(languages, namespace, key, fallbackValue) {\n      var _this2 = this;\n\n      if (typeof languages === 'string') languages = [languages];\n\n      var payload = {};\n      payload[key] = fallbackValue || '';\n\n      languages.forEach(function (lng) {\n        var url = _this2.services.interpolator.interpolate(_this2.options.addPath, { lng: lng, ns: namespace });\n\n        _this2.options.ajax(url, _this2.options, function (data, xhr) {\n          //const statusCode = xhr.status.toString();\n          // TODO: if statusCode === 4xx do log\n        }, payload);\n      });\n    }\n  }]);\n\n  return Backend;\n}();\n\nBackend.type = 'backend';\n\nexports.default = Backend;"]},"metadata":{},"sourceType":"script"}