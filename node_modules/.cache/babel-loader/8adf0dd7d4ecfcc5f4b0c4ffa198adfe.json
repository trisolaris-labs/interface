{"ast":null,"code":"'use strict';\n\nconst mh = require('multihashes');\n\nconst CIDUtil = {\n  /**\n   * Test if the given input is a valid CID object.\n   * Returns an error message if it is not.\n   * Returns undefined if it is a valid CID.\n   *\n   * @param {any} other\n   * @returns {string|undefined}\n   */\n  checkCIDComponents: function (other) {\n    if (other == null) {\n      return 'null values are not valid CIDs';\n    }\n\n    if (!(other.version === 0 || other.version === 1)) {\n      return 'Invalid version, must be a number equal to 1 or 0';\n    }\n\n    if (typeof other.codec !== 'string') {\n      return 'codec must be string';\n    }\n\n    if (other.version === 0) {\n      if (other.codec !== 'dag-pb') {\n        return \"codec must be 'dag-pb' for CIDv0\";\n      }\n\n      if (other.multibaseName !== 'base58btc') {\n        return \"multibaseName must be 'base58btc' for CIDv0\";\n      }\n    }\n\n    if (!(other.multihash instanceof Uint8Array)) {\n      return 'multihash must be a Uint8Array';\n    }\n\n    try {\n      mh.validate(other.multihash);\n    } catch (err) {\n      let errorMsg = err.message;\n\n      if (!errorMsg) {\n        // Just in case mh.validate() throws an error with empty error message\n        errorMsg = 'Multihash validation failed';\n      }\n\n      return errorMsg;\n    }\n  }\n};\nmodule.exports = CIDUtil;","map":{"version":3,"sources":["/Users/sidshekhar/Documents/interface/node_modules/cids/src/cid-util.js"],"names":["mh","require","CIDUtil","checkCIDComponents","other","version","codec","multibaseName","multihash","Uint8Array","validate","err","errorMsg","message","module","exports"],"mappings":"AAAA;;AAEA,MAAMA,EAAE,GAAGC,OAAO,CAAC,aAAD,CAAlB;;AAEA,MAAMC,OAAO,GAAG;AACd;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACEC,EAAAA,kBAAkB,EAAE,UAAUC,KAAV,EAAiB;AACnC,QAAIA,KAAK,IAAI,IAAb,EAAmB;AACjB,aAAO,gCAAP;AACD;;AAED,QAAI,EAAEA,KAAK,CAACC,OAAN,KAAkB,CAAlB,IAAuBD,KAAK,CAACC,OAAN,KAAkB,CAA3C,CAAJ,EAAmD;AACjD,aAAO,mDAAP;AACD;;AAED,QAAI,OAAOD,KAAK,CAACE,KAAb,KAAuB,QAA3B,EAAqC;AACnC,aAAO,sBAAP;AACD;;AAED,QAAIF,KAAK,CAACC,OAAN,KAAkB,CAAtB,EAAyB;AACvB,UAAID,KAAK,CAACE,KAAN,KAAgB,QAApB,EAA8B;AAC5B,eAAO,kCAAP;AACD;;AACD,UAAIF,KAAK,CAACG,aAAN,KAAwB,WAA5B,EAAyC;AACvC,eAAO,6CAAP;AACD;AACF;;AAED,QAAI,EAAEH,KAAK,CAACI,SAAN,YAA2BC,UAA7B,CAAJ,EAA8C;AAC5C,aAAO,gCAAP;AACD;;AAED,QAAI;AACFT,MAAAA,EAAE,CAACU,QAAH,CAAYN,KAAK,CAACI,SAAlB;AACD,KAFD,CAEE,OAAOG,GAAP,EAAY;AACZ,UAAIC,QAAQ,GAAGD,GAAG,CAACE,OAAnB;;AACA,UAAI,CAACD,QAAL,EAAe;AAAE;AACfA,QAAAA,QAAQ,GAAG,6BAAX;AACD;;AACD,aAAOA,QAAP;AACD;AACF;AA5Ca,CAAhB;AA+CAE,MAAM,CAACC,OAAP,GAAiBb,OAAjB","sourcesContent":["'use strict'\n\nconst mh = require('multihashes')\n\nconst CIDUtil = {\n  /**\n   * Test if the given input is a valid CID object.\n   * Returns an error message if it is not.\n   * Returns undefined if it is a valid CID.\n   *\n   * @param {any} other\n   * @returns {string|undefined}\n   */\n  checkCIDComponents: function (other) {\n    if (other == null) {\n      return 'null values are not valid CIDs'\n    }\n\n    if (!(other.version === 0 || other.version === 1)) {\n      return 'Invalid version, must be a number equal to 1 or 0'\n    }\n\n    if (typeof other.codec !== 'string') {\n      return 'codec must be string'\n    }\n\n    if (other.version === 0) {\n      if (other.codec !== 'dag-pb') {\n        return \"codec must be 'dag-pb' for CIDv0\"\n      }\n      if (other.multibaseName !== 'base58btc') {\n        return \"multibaseName must be 'base58btc' for CIDv0\"\n      }\n    }\n\n    if (!(other.multihash instanceof Uint8Array)) {\n      return 'multihash must be a Uint8Array'\n    }\n\n    try {\n      mh.validate(other.multihash)\n    } catch (err) {\n      let errorMsg = err.message\n      if (!errorMsg) { // Just in case mh.validate() throws an error with empty error message\n        errorMsg = 'Multihash validation failed'\n      }\n      return errorMsg\n    }\n  }\n}\n\nmodule.exports = CIDUtil\n"]},"metadata":{},"sourceType":"script"}